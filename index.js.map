{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport const getData = async (name, page) => {\n\n  const {data} =  await axios.get(`https://pixabay.com/api/`, { params: {\n      key: '49325952-cafcda966d997e584839964e4',\n      q: name,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    }})\n  return data\n}\n\n","import * as basicLightbox from 'basiclightbox';\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { refs } from '../main.js';\n\nconst createCardHtml = ({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) =>{\n\n  const arrayOfTags = tags.split(',')\n  const filteredTags = arrayOfTags.filter((tag, index, array)=> index === array.indexOf(tag)).join(',')\n\n  return `<li>\n      <a class =\"link\" href=\"${largeImageURL}\">\n          <img class=\"image\" src = \"${webformatURL}\" alt=\"${filteredTags}\"/>\n          <div class= \"wrapper\">\n              <div class =\"container\">\n                  <p>Likes</p>\n                  <p class=\"numbers\">${likes}</p>\n              </div>\n              <div class =\"container\">\n                  <p>Views</p>\n                  <p class=\"numbers\">${views}</p>\n              </div>\n               <div class =\"container\">\n                  <p>Comments</p>\n                  <p class=\"numbers\">${comments}</p>\n              </div>\n              <div class =\"container\">\n                  <p>Downloads</p>\n                  <p class=\"numbers\">${downloads}</p>\n              </div>\n          </div>\n      </a>\n</li>`\n}\n\nexport const instance = basicLightbox.create(`<span class=\"loader\"></span>`)\n\nexport const lightbox = new SimpleLightbox('.link', {captionsData: 'alt'});\n\nexport const renderCards = (response)=>{\n  const cardsMarkup = response.map(obj => createCardHtml(obj)).join('')\n  refs.gallery.insertAdjacentHTML('beforeend', cardsMarkup)\n\n  lightbox.refresh();\n}","import { getData } from './js/pixabay-api.js';\nimport {  instance } from './js/render-functions.js';\nimport iziToast from \"izitoast\";\nimport {renderCards} from \"./js/render-functions.js\"\n\n\n\nexport const refs = {\n  form: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  button: document.querySelector('.load-more')\n}\n\nlet page = 1;\nlet inputValue = '';\nlet totalItems;\nlet totalPages;\n\nconst handleSubmit = async (event) =>{\n  event.preventDefault()\n\n  inputValue = event.target.elements['search-text'].value.trim()\n  if (!inputValue) return\n\n  event.target.reset()\n  instance.show()\n\n  page = 1;\n  refs.gallery.innerHTML = ''\n\n  try{\n    const {hits, total} = await getData(inputValue, page)\n    totalItems = total\n    totalPages = Math.ceil((totalItems/15))\n\n\n    if(hits.length === 0){\n      refs.button.classList.add('is-hidden')\n      iziToast.error({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n      });\n      return\n    }\n\n    renderCards(hits)\n    refs.button.classList.remove('is-hidden')\n\n    if(totalPages === page){\n      refs.button.classList.add('is-hidden')\n    }\n\n  }\n  catch(error){\n    console.log(error.message)\n  }\n  finally{\n    instance.close()\n  }\n}\n\n\nconst loadMorePictures = async (event)=> {\n  page++\n  instance.show()\n\n  try {\n    const {hits} = await getData(inputValue, page)\n    renderCards(hits)\n\n    const lastCard = refs.gallery.children[refs.gallery.children.length - 1];\n    const cardHeight = lastCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: \"smooth\"\n    })\n\n    if(totalPages === page){\n      refs.button.classList.add('is-hidden')\n      iziToast.info({message: 'We\\'re sorry, but you\\'ve reached the end of search results.\\n'})\n    }\n\n  } catch (error) {\n    console.log(error.message)\n  }\n  finally{\n    instance.close()\n  }\n}\n\nrefs.form.addEventListener('submit', handleSubmit)\n\nrefs.button.addEventListener('click', loadMorePictures)\n\nrefs.loader.classList.add('is-hidden')"],"names":["getData","name","page","data","axios","createCardHtml","webformatURL","largeImageURL","tags","likes","views","comments","downloads","filteredTags","tag","index","array","instance","basicLightbox.create","lightbox","SimpleLightbox","renderCards","response","cardsMarkup","obj","refs","inputValue","totalItems","totalPages","handleSubmit","event","hits","total","iziToast","error","loadMorePictures","cardHeight"],"mappings":"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"}